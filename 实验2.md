### 第三题
- 3、在notepad（32位64位均可）中，输入一段文字。然后使用调试器，在内存中修改这段文字。使得没有在界面操作notepad的修改文字的情况下。notepad中显示的文字变化。
  - 提示：在调试器中定位控件缓存的内存地址，可以用搜索、逆向、消息截获分析、API截获分析等方法
- 方法：找到字符串的内存地址，并对其进行修改，然后再运行进程
- 使用WinDbg直接修改内存地址，打开WinDbg一次选择```File - Attach to a Process(F6)```添加notepad.exe
![image](https://raw.githubusercontent.com/PWHL/Software-system-and-security/job1/img2/1.png)

```bash
#查看所有的堆
!heap -a

#查找字符串，每一个地址都要去试，不过很巧第一个就是要查找的字符串
s -u 207c55c0000 L000ff000 "ABCDEF"

#显示字符串
du 00000207`c562c880
 
#修改字符串
ezu 00000207`c562c880 "BBBBBB"

#再显示字符串
du 00000207`c562880

# 执行进程
g
```
![image](https://raw.githubusercontent.com/PWHL/Software-system-and-security/job1/img2/2.png)
![image](https://raw.githubusercontent.com/PWHL/Software-system-and-security/job1/img2/3.png)

### 第四题 
- 4、通过调试器监控计算器程序的运行，每当运行结果为666时，就改为999。
  - 提示：找到运行结果在内存中保存的地址。监控 “=” 按键消息等。
  - 
#### 实验环境
- virtualbox
- windows7(32位)
- windbg(32位)
- calc.exe
#### 实验过程
- 打开虚拟机，依次打开```file->Execuatble->calc.exe```
- 新建文本文件为hello.txt写入一下内容
```bash
# 定义一个变量name,将poi（esp+0x8）处的 unicode字符串取出赋给name
as /mu ${/v:name1} poi(esp+0x8)
# 比较字符串，如果name和666相等就显示999，否则输出name的值
.if($scmp(@"${name1}","666")==0){ezu poi(esp+0x8) "999";}.else{.echo ${name1};}
# 继续运行程序
g
```
- 输入命令执行hello.txt```bp SetWindowTextW "$<文件路径"```当计算器中显示666时被改为999
![image](https://raw.githubusercontent.com/PWHL/Software-system-and-security/job1/img2/hhh.gif)


